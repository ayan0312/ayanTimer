!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ayanTimer",[],t):"object"==typeof exports?exports.ayanTimer=t():e.ayanTimer=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={format:function(e){var t=new Date,n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours()%12==0?12:t.getHours()%12,"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+{0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"}[t.getDay()+""])),n)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return e},secondToTime:function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=Math.floor(e-3600*t-60*n);return(t>0?[t,n,r]:[n,r]).map(function(e){return e<10?"0"+e:""+e}).join(":")},storage:function(){var e={},t={set:function(t,n){if("string"!=typeof n)return new TypeError("fakeStorage..");e[t]=n},get:function(t){return e[t]}};return void 0===window.localStorage?t:{set:function(e,t){localStorage.setItem(e,t)},get:function(e){return localStorage.getItem(e)}}},isMobile:/mobile/i.test(window.navigator.userAgent)};t.default=r},function(e,t,n){"use strict";e.exports=n(8)},function(e,t,n){"use strict";n(3),n(4);var r,i=n(5),o=(r=i)&&r.__esModule?r:{default:r};console.log("\n %c ayanTimer v"+i.version+" %c https://github.com/ayan0312/ayanTimer \n","color: #803b39; background: #dc995a; padding:5px 0;","background: #efefef; padding:5px 0;"),window.AyanTimer=o.default},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(0)),o=u(n(6)),a=u(n(10));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=t.version="0.2.0",l=function(){function e(){s(this,e),this.timer=null,this.isTimerPlaying=!1,this.currentTime="00:00"}return r(e,[{key:"getTime",value:function(){return this.currentTime}},{key:"createAsyncTimerResource",value:function(t){return this.timerAsyncRes||(this.timerAsyncRes={}),this.timerAsyncRes[t]=new e,this.timerAsyncRes[t]}},{key:"getAsyncTimerResource",value:function(e){return this.timerAsyncRes[e]}},{key:"getTimerStatus",value:function(){return this.isTimerPlaying?"playing":"pause"}},{key:"startTime",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(this.isTimerPlaying?clearInterval(this.timer):this.isTimerPlaying=!0,"number"!=typeof(e=Math.abs(parseFloat(e))))return new TypeError("请传入正确的时间类型,time is not a number");var r=60*e;this.timer=setInterval(function(){if(r<=0)return t.currentTime="00:00",clearInterval(t.timer),t.isTimerPlaying=!1,void n(t.currentTime);var e=i.default.secondToTime(r);t.currentTime=e,n(t.currentTime),r--},1e3)}},{key:"queryPresentTime",value:function(e){var t=this;clearInterval(this.timer),this.timer=setInterval(function(){t.currentTime=i.default.format("HH:mm:ss"),e(t.currentTime)},1e3)}},{key:"updateTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};clearInterval(this.timer),this.startTime(e,t)}},{key:"resetTime",value:function(e){clearInterval(this.timer),this.startTime(0,e)}}]),e}(),f=function(){function e(t){s(this,e),this.timer=new l,this.storage=new a.default,this.version=c,this.options=this._handleOption(t),null===this.options.time&&(this.options.time=this.timer.currentTime),this._init()}return r(e,[{key:"about",value:function(){return"version:"+this.version}},{key:"_handleOption",value:function(e){return{container:e.container||document.getElementById("ayan-timer"),time:e.time?i.default.secondToTime(e.time):null,work:this.storage.get("work")||25,rest:this.storage.get("rest")||5}}},{key:"_init",value:function(){this.template=new o.default(this.options),this._bindEvents()}},{key:"_bindEvents",value:function(){var e=this,t=this.template.getItem("buttons"),n=this.template.getItem("time"),r=function(e){n.innerHTML=e};t.work.addEventListener("click",function(t){var n=e.template.getItem("options").work.value;e.storage.set("work",n),e.timer.updateTime(n,r)},!1),t.rest.addEventListener("click",function(t){var n=e.template.getItem("options").rest.value;e.storage.set("rest",n),e.timer.updateTime(n,r)},!1),t.reset.addEventListener("click",function(t){e.timer.resetTime(r)},!1),t.now.addEventListener("click",function(t){e.timer.queryPresentTime(r)},!1);var i=this.timer.createAsyncTimerResource("now");t.now.addEventListener("mouseenter",function(e){i.isTimerPlaying||i.queryPresentTime(function(e){t.now.dataset.balloon=e})})}}],[{key:"about",value:function(){return"version:"+c}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(7),a=(r=o)&&r.__esModule?r:{default:r};var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container,this.options=t,this.elements={},this._init()}return i(e,[{key:"_init",value:function(){this.container.innerHTML=(0,a.default)({options:this.options});var e={},t={};this.elements.time=this.container.querySelector(".ayan-control-time"),e.work=this.container.querySelector(".ayan-control-option-work"),e.rest=this.container.querySelector(".ayan-control-option-rest"),t.work=this.container.querySelector(".ayan-control-button-work"),t.rest=this.container.querySelector(".ayan-control-button-rest"),t.reset=this.container.querySelector(".ayan-control-button-reset"),t.now=this.container.querySelector(".ayan-control-button-now"),this.elements.options=e,this.elements.buttons=t}},{key:"getItem",value:function(e){return this.elements[e]}}]),e}();t.default=u},function(e,t,n){var r=n(1);e.exports=function(e){"use strict";var t,i="",o=(e=e||{}).options,a=r.$escape;arguments[1];return i+='<div id="ayan-timer">\r\n    <div class="ayan-control">\r\n        <p class="ayan-control-time">',i+=o.time,i+='</p>\r\n\r\n        <div class="ayan-control-option">\r\n            <p>工作时间：\r\n                <input class="ayan-input ayan-primary-input ayan-control-option-work" type="number" value="',i+=a(o.work),i+='" />\r\n            </p>\r\n            <p>休息时间：\r\n                <input class="ayan-input ayan-primary-input ayan-control-option-rest" type="number" value="',i+=a(o.rest),i+='">\r\n            </p>\r\n        </div>\r\n        \r\n        <div class="ayan-control-button">\r\n            <button class="ayan-button ayan-primary-button ayan-control-button-work">工作</button>\r\n            <button class="ayan-button ayan-primary-button ayan-control-button-rest">休息</button>\r\n            <button class="ayan-button ayan-default-button ayan-control-button-reset">取消</button>\r\n            <button class="ayan-button ayan-default-button ayan-control-button-now" data-balloon="查看当前时间" data-balloon-pos="up">查看当前时间</button>\r\n        </div>\r\n    </div>\r\n\r\n    ',t=n(9)(e),i+=t,i+="\r\n</div>"}},function(e,t,n){"use strict";
/*! art-template@runtime | https://github.com/aui/art-template */var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i=Object.create(r),o=/["&'<>]/;i.$escape=function(e){return function(e){var t=""+e,n=o.exec(t);if(!n)return e;var r="",i=void 0,a=void 0,u=void 0;for(i=n.index,a=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:u="&#34;";break;case 38:u="&#38;";break;case 39:u="&#39;";break;case 60:u="&#60;";break;case 62:u="&#62;";break;default:continue}a!==i&&(r+=t.substring(a,i)),a=i+1,r+=u}return a!==i?r+t.substring(a,i):r}(function e(t){"string"!=typeof t&&(t=null==t?"":"function"==typeof t?e(t.call(t)):JSON.stringify(t));return t}(e))},i.$each=function(e,t){if(Array.isArray(e))for(var n=0,r=e.length;n<r;n++)t(e[n],n);else for(var i in e)t(e[i],i)},e.exports=i},function(e,t,n){n(1);e.exports=function(e){"use strict";e=e||{};return'<div class="square-block" id="square-block">\r\n    <i class="before-square" id="before-square"></i>\r\n    <i class="after-square" id="after-square"></i>\r\n</div>','<div class="square-block" id="square-block">\r\n    <i class="before-square" id="before-square"></i>\r\n    <i class="after-square" id="after-square"></i>\r\n</div>'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=(r=o)&&r.__esModule?r:{default:r};var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data={},this.storage=a.default.storage()}return i(e,[{key:"get",value:function(e){return this.data.item?this.data.item:this.storage.get(e)}},{key:"set",value:function(e,t){this.data.item="string"!=typeof t?JSON.stringify(t):t,this.storage.set(e,this.data.item)}}]),e}();t.default=u}]).default});
//# sourceMappingURL=ayanTimer.min.js.map