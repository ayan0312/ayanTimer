!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ayanTimer",[],e):"object"==typeof exports?exports.ayanTimer=e():t.ayanTimer=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={format:function(t){var e=new Date,n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours()%12==0?12:e.getHours()%12,"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+{0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"}[e.getDay()+""])),n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t},secondToTime:function(t){var e=Math.floor(t/3600),n=Math.floor((t-3600*e)/60),r=Math.floor(t-3600*e-60*n);return(e>0?[e,n,r]:[n,r]).map(function(t){return t<10?"0"+t:""+t}).join(":")},storage:{set:function(t,e){localStorage.setItem(t,e)},get:function(t){return localStorage.getItem(t)}},isMobile:/mobile/i.test(window.navigator.userAgent)};e.default=r},function(t,e,n){"use strict";n(2);var r,o=n(3),i=(r=o)&&r.__esModule?r:{default:r};window.AyanTimer=i.default},function(t,e,n){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=u(n(0)),i=u(n(4)),a=u(n(9));function u(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(){s(this,t),this.timer=null,this.isTimerPlaying=!1,this.currentTime="00:00"}return r(t,[{key:"getTime",value:function(){return this.currentTime}},{key:"getTimerStatus",value:function(){return this.isTimerPlaying?"playing":"pause"}},{key:"startTime",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(this.isTimerPlaying?clearInterval(this.timer):this.isTimerPlaying=!0,"number"!=typeof(t=Math.abs(parseFloat(t))))return new TypeError("请传入正确的时间类型,time is not a number");var r=60*t;this.timer=setInterval(function(){if(r<=0)return e.currentTime="00:00",clearInterval(e.timer),e.isTimerPlaying=!1,void n(e.currentTime);var t=o.default.secondToTime(r);e.currentTime=t,n(e.currentTime),r--},1e3)}},{key:"queryPresentTime",value:function(t){var e=this;clearInterval(this.timer),this.timer=setInterval(function(){e.currentTime=o.default.format("HH:mm:ss"),t(e.currentTime)},1e3)}},{key:"updateTime",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};clearInterval(this.timer),this.startTime(t,e)}},{key:"resetTime",value:function(t){clearInterval(this.timer),this.startTime(0,t)}}]),t}(),c=function(){function t(e){s(this,t),this.timer=new l,this.storage=new a.default,this.options=this._handleOption(e),null===this.options.time&&(this.options.time=this.timer.currentTime),this._init()}return r(t,[{key:"_handleOption",value:function(t){return{container:t.container||document.getElementById("ayan-timer"),time:t.time?o.default.secondToTime(t.time):null,work:this.storage.get("work")||25,rest:this.storage.get("rest")||5}}},{key:"_init",value:function(){this.template=new i.default(this.options),this._bindEvents()}},{key:"_bindEvents",value:function(){var t=this,e=(this.template.getItem("options"),this.template.getItem("buttons")),n=this.template.getItem("time"),r=function(t){n.innerHTML=t};e.work.addEventListener("click",function(e){var n=t.template.getItem("options").work.value;t.storage.set("work",n),t.timer.updateTime(n,r)},!1),e.rest.addEventListener("click",function(e){var n=t.template.getItem("options").rest.value;t.storage.set("rest",n),t.timer.updateTime(n,r)},!1),e.reset.addEventListener("click",function(e){t.timer.resetTime(r)},!1),e.now.addEventListener("click",function(e){t.timer.queryPresentTime(r)},!1)}}]),t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(5),a=(r=i)&&r.__esModule?r:{default:r};var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.container,this.options=e,this.elements={},this._init()}return o(t,[{key:"_init",value:function(){this.container.innerHTML=(0,a.default)({options:this.options});var t={},e={};this.elements.time=this.container.querySelector(".ayan-time-display"),t.work=this.container.querySelector(".ayan-control-option-work"),t.rest=this.container.querySelector(".ayan-control-option-rest"),e.work=this.container.querySelector(".ayan-control-button-work"),e.rest=this.container.querySelector(".ayan-control-button-rest"),e.reset=this.container.querySelector(".ayan-control-button-reset"),e.now=this.container.querySelector(".ayan-control-button-now"),this.elements.options=t,this.elements.buttons=e}},{key:"getItem",value:function(t){return this.elements[t]}}]),t}();e.default=u},function(t,e,n){var r=n(6);t.exports=function(t){"use strict";var e="",n=(t=t||{}).options,o=r.$escape;return e+='<div id="ayan-timer">\r\n    <p class="ayan-time-display">',e+=n.time,e+='</p>\r\n\r\n    <div class="ayan-control">\r\n        <div class="ayan-control-option">\r\n            <p>工作时间：\r\n                <input class="ayan-control-option-work" type="number" value="',e+=o(n.work),e+='" />\r\n            </p>\r\n            <p>休息时间：\r\n                <input class="ayan-control-option-rest" type="number" value="',e+=o(n.rest),e+='">\r\n            </p>\r\n        </div>\r\n        \r\n        <div class="ayan-control-button">\r\n            <button class="ayan-control-button-work" data-balloon="开始工作" data-balloon-pos="left">工作</button>\r\n            <button class="ayan-control-button-rest" data-balloon="开始休息" data-balloon-pos="left">休息</button>\r\n            <button class="ayan-control-button-reset" data-balloon="工作取消" data-balloon-pos="left">取消</button>\r\n            <button class="ayan-control-button-now" data-balloon="查看当前时间" data-balloon-pos="left">查看当前时间</button>\r\n        </div>\r\n    </div>\r\n</div>'}},function(t,e,n){"use strict";t.exports=n(7)},function(t,e,n){"use strict";(function(e){/*! art-template@runtime | https://github.com/aui/art-template */var n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},r=Object.create(n),o=/["&'<>]/;r.$escape=function(t){return function(t){var e=""+t,n=o.exec(e);if(!n)return t;var r="",i=void 0,a=void 0,u=void 0;for(i=n.index,a=0;i<e.length;i++){switch(e.charCodeAt(i)){case 34:u="&#34;";break;case 38:u="&#38;";break;case 39:u="&#39;";break;case 60:u="&#60;";break;case 62:u="&#62;";break;default:continue}a!==i&&(r+=e.substring(a,i)),a=i+1,r+=u}return a!==i?r+e.substring(a,i):r}(function t(e){"string"!=typeof e&&(e=null==e?"":"function"==typeof e?t(e.call(e)):JSON.stringify(e));return e}(t))},r.$each=function(t,e){if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++)e(t[n],n);else for(var o in t)e(t[o],o)},t.exports=r}).call(this,n(8))},function(t,e,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":o(window))&&(r=window)}t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),a=(r=i)&&r.__esModule?r:{default:r};var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data={}}return o(t,[{key:"get",value:function(t){var e=void 0;if("string"!=typeof(e=this.data.item?this.data.item:a.default.storage.get(t)))return e;try{return JSON.parse(e)}catch(t){return t}}},{key:"set",value:function(t,e){this.data.item=JSON.stringify(e),a.default.storage.set(t,this.data.item)}}]),t}();e.default=u}]).default});
//# sourceMappingURL=ayanTimer.min.js.map