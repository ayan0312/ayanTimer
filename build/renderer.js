!function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(r,s,function(e){return t[e]}.bind(null,s));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./",n(n.s="zpHS")}({"8+6y":function(t,e,n){var r=n("NVNq");t.exports=function(t){"use strict";var e="",n=(t=t||{}).options,s=r.$escape,i=t.icons,a=t.selectDateInput;return e+='<div class="ayan-timer">\r\n    <div class="ayan-control">\r\n        <p class="ayan-control-time">',e+=n.time,e+='</p>\r\n\r\n        <div class="ayan-control-option">\r\n            <p>工作时间：\r\n                <input class="ayan-input ayan-primary-input ayan-control-option-work" type="number" value="',e+=s(n.work),e+='" />\r\n            </p>\r\n            <p>休息时间：\r\n                <input class="ayan-input ayan-primary-input ayan-control-option-rest" type="number" value="',e+=s(n.rest),e+='">\r\n            </p>\r\n        </div>\r\n        \r\n        <div class="ayan-control-button">\r\n            <button class="ayan-button ayan-primary-button ayan-control-button-work">工作</button>\r\n            <button class="ayan-button ayan-primary-button ayan-control-button-rest">休息</button>\r\n            <button class="ayan-button ayan-default-button ayan-control-button-reset">取消</button>\r\n            <button class="ayan-button ayan-default-button ayan-control-button-now">查看当前时间</button>\r\n        </div>\r\n    </div>\r\n    <div class="ayan-select">\r\n        <span class="ayan-select-menu ayan-icon">\r\n            ',e+=i.menu,e+='\r\n        </span>\r\n        <ul class="ayan-select-list">\r\n            <h4>选项</h4>\r\n            <li class="ayan-select-list-plan">\r\n                <span>设置计划</span>\r\n            </li>\r\n            <li class="ayan-select-list-history">\r\n                <span>历史记录</span>\r\n            </li>\r\n            <h4>高级选项</h4>\r\n            <li>\r\n                <span>导出数据</span>\r\n            </li>\r\n            <li>\r\n                <span>导入数据</span>\r\n            </li>\r\n            <h4>关于</h4>\r\n            <li>\r\n                <span>捐献</span>\r\n            </li>\r\n            <li>\r\n                <span>帮助</span>\r\n            </li>\r\n            <li>\r\n                <span>开发者</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ayan-setting">\r\n        <span class="ayan-setting-cancel ayan-icon">\r\n            ',e+=i.up,e+='\r\n        </span>\r\n        <div class="ayan-setting-input">\r\n            <h4>设置</h4>\r\n\r\n            <p>起始时间：</p>\r\n            <span class="ayan-setting-input-start ayan-input-date">00:00:00 凌晨</span>\r\n\r\n            <p>结束时间：</p>\r\n            <span class="ayan-setting-input-end ayan-input-date">00:00:00 凌晨</span>\r\n\r\n            <p>此次任务名称：</p>\r\n            <input type="text" style="width:200px" placeholder="请输入" />\r\n\r\n            <button class="ayan-button ayan-default-button">提交</button>\r\n        </div>\r\n    </div>\r\n\r\n    ',e+=a,e+='\r\n\r\n    <div class="square-block" id="square-block">\r\n        <i class="before-square" id="before-square"></i>\r\n        <i class="after-square" id="after-square"></i>\r\n    </div>\r\n</div>'}},BQAf:function(t,e,n){},Bf6K:function(t,e){t.exports='<svg version="1.1" id="Layer_1" xmlns:x="&amp;ns_extend;" xmlns:i="&amp;ns_ai;" xmlns:graph="&amp;ns_graphs;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g fill="#b1afaf"><g><g><path d="M17,10c-0.3,0-0.5-0.1-0.7-0.3l-5-5c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5,5c0.4,0.4,0.4,1,0,1.4C17.5,9.9,17.3,10,17,10z"></path></g></g><g><g><path d="M7,10c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5-5c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-5,5C7.5,9.9,7.3,10,7,10z"></path></g></g><g><g><path d="M12,21c-0.6,0-1-0.4-1-1V4c0-0.6,0.4-1,1-1s1,0.4,1,1v16C13,20.6,12.6,21,12,21z"></path></g></g></g></svg>'},NVNq:function(t,e,n){"use strict";t.exports=n("Q148")},Q148:function(t,e,n){"use strict";
/*! art-template@runtime | https://github.com/aui/art-template */var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s=Object.create(r),i=/["&'<>]/;s.$escape=function(t){return function(t){var e=""+t,n=i.exec(e);if(!n)return t;var r="",s=void 0,a=void 0,o=void 0;for(s=n.index,a=0;s<e.length;s++){switch(e.charCodeAt(s)){case 34:o="&#34;";break;case 38:o="&#38;";break;case 39:o="&#39;";break;case 60:o="&#60;";break;case 62:o="&#62;";break;default:continue}a!==s&&(r+=e.substring(a,s)),a=s+1,r+=o}return a!==s?r+e.substring(a,s):r}(function t(e){"string"!=typeof e&&(e=null==e?"":"function"==typeof e?t(e.call(e)):JSON.stringify(e));return e}(t))},s.$each=function(t,e){if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++)e(t[n],n);else for(var s in t)e(t[s],s)},t.exports=s},Wr5F:function(t,e,n){},gsN0:function(t,e){t.exports='<svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" enable-background="new 0 0 48 48"><g fill="#b1afaf"><rect x="6" y="22" width="36" height="4"></rect><rect x="6" y="10" width="36" height="4"></rect><rect x="6" y="34" width="36" height="4"></rect></g></svg>'},kcQs:function(t,e,n){var r=n("NVNq");t.exports=function(t){"use strict";t=t||{};var e="",n=r.$escape,s=t.styles,i=t.selectDate,a=r.$each;t.$value,t.$index;return e+='<div class="ayan-date-mark">\r\n    <p class="',e+=n(s.test),e+='"></p>\r\n    <div class="ayan-date-mark-info">\r\n        ',e+=n(i.currentTime),e+='\r\n    </div>\r\n    <button class="ayan-date-mark-button ayan-button ayan-default-button">确定</button>\r\n    <div class="ayan-date-mark-list">\r\n        <div class="ayan-date-mark-select">\r\n            <ul class="ayan-date-mark-select-hours">\r\n            ',a(i.minTime.hours,function(t,r){e+="\r\n                <li class=\r\n                ","0"==r&&(e+="\r\n                    'ayan-current'\r\n                "),e+="\r\n                >",e+=n(t),e+="</li>\r\n            "}),e+='\r\n            </ul>\r\n        </div>\r\n        <div class="ayan-date-mark-select">\r\n            <ul class="ayan-date-mark-select-minutes">\r\n            ',a(i.minTime.minutes,function(t,r){e+="\r\n                <li class=\r\n                ","0"==r&&(e+="\r\n                    'ayan-current'\r\n                "),e+="\r\n                >",e+=n(t),e+="</li>\r\n            "}),e+='\r\n            </ul>\r\n        </div>\r\n        <div class="ayan-date-mark-select">\r\n            <ul class="ayan-date-mark-select-seconds">\r\n            ',a(i.minTime.seconds,function(t,r){e+="\r\n                <li class=\r\n                ","0"==r&&(e+="\r\n                    'ayan-current'\r\n                "),e+="\r\n                >",e+=n(t),e+="</li>\r\n            "}),e+="\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    \r\n</div>"}},zpHS:function(t,e,n){"use strict";n.r(e);let r={};var s={format(t){let e=new Date,n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours()%12==0?12:e.getHours()%12,"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()},r={0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+r[e.getDay()+""]));for(let e in n)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[e]:("00"+n[e]).substr((""+n[e]).length)));return t},getCurrentTimeName(t){let e=parseInt(t.split(":")[0]);return e<6?"凌晨":e<9?"早晨":e<12?"上午":e<13?"中午":e<18?"下午":e<24?"晚上":void 0},secondToTime(t){const e=Math.floor(t/3600),n=Math.floor((t-3600*e)/60),r=Math.floor(t-3600*e-60*n);return(e>0?[e,n,r]:[n,r]).map(t=>t<10?"0"+t:""+t).join(":")},storage:()=>{let t={};return void 0===r.localStorage?{set:(e,n)=>{if("string"!=typeof n)return new TypeError("fakeStorage..");t[e]=n},get:e=>t[e]}:{set:(t,e)=>{localStorage.setItem(t,e)},get:t=>localStorage.getItem(t)}}},i=n("8+6y"),a=n.n(i),o=(n("BQAf"),n("gsN0")),l=n.n(o),c=n("Bf6K"),u=n.n(c);var h={menu:l.a,up:u.a},m=n("kcQs"),p=n.n(m),d=n("Wr5F"),y=n.n(d);class g{constructor(t,e){this.eventTemplateName=t,this.eventsList=e,this.events={}}type(t){return-1!==this.eventsList.indexOf(t)?this.eventTemplateName:(console.error(`Unknown event name: ${t}`),null)}trigger(t,e={}){this.events[t]&&this.events[t].length&&this.events[t].map(t=>{t(e)})}on(t,e){this._type(t)&&"function"==typeof e&&(this.events[t]||(this.events[t]=[]),this.events[t].push(e))}}class v{constructor(t){this.container=t.container,this.template=t,this.elements={},this.events=new g("dateInput",["submit","input"]),this.dateString="00:00:00 凌晨",this._init()}_init(){this.selectDate=v.dateFormat(),this.elements.date=this.container.querySelector(".ayan-date-mark"),this.elements.time=this.container.querySelector(".ayan-date-mark-info"),this.elements.button=this.container.querySelector(".ayan-date-mark-button"),this.elements.list={hours:this.container.querySelector(".ayan-date-mark-select-hour"),minutes:this.container.querySelector(".ayan-date-mark-select-minutes"),seconds:this.container.querySelector(".ayan-date-mark-select-seconds")},this.bindEvent()}bindEvent(){this.elements.button.addEventListener("click",()=>{this.events.trigger("submit",this.dateString),this.elements.date.style.display="none"})}set dateInputValue(t){this.dateInputChange(t)}get dateInputValue(){return this.dateString}dateInputChange(){this.resetDateSelect({hours:[],minutes:[],seconds:[]})}resetDateSelect(t={hours:[],minutes:[],seconds:[]}){}show(t){let e,n;process.env.IS_ELECTRON?(e="70px",n="269.5px"):(e=t.offsetLeft+"px",n=t.offsetTop+"px"),this.elements.date.style.left=e,this.elements.date.style.top=n,this.elements.date.style.display="block"}static html(){return p()({styles:y.a,selectDate:v.dateFormat("00:00:00")})}static dateFormat(t){let e=t||s.format("HH:mm:ss"),n=s.getCurrentTimeName(e),r=e.split(":");return{currentTime:`${e} ${n}`,minTime:{hours:this._timeFormat(r[0],"hour"),minutes:this._timeFormat(r[1],"minute"),seconds:this._timeFormat(r[2],"second")}}}static _timeFormat(t,e){let n=[];if("number"==typeof(t=parseInt(t))){if(["minute","second"].includes(e))for(;t<60;t++)n.push(t);else{if(!["hour"].includes(e))return;for(;t<24;t++)n.push(t)}return n}}}class f{constructor(t){this.container=t.container,this.options=t,this.elements={},this._init()}_init(){this.container.innerHTML=a()({icons:h,options:this.options,selectDateInput:v.html()}),this.elements.ayanTimer=this.container.querySelector(".ayan-timer"),this.elements.time=this.container.querySelector(".ayan-control-time"),this.elements.options={work:this.container.querySelector(".ayan-control-option-work"),rest:this.container.querySelector(".ayan-control-option-rest")},this.elements.buttons={work:this.container.querySelector(".ayan-control-button-work"),rest:this.container.querySelector(".ayan-control-button-rest"),reset:this.container.querySelector(".ayan-control-button-reset"),now:this.container.querySelector(".ayan-control-button-now")},this.elements.select={plan:this.container.querySelector(".ayan-select-list-plan"),history:this.container.querySelector(".ayan-select-list-history")},this.elements.setting={setting:this.container.querySelector(".ayan-setting"),cancel:this.container.querySelector(".ayan-setting-cancel"),start:this.container.querySelector(".ayan-setting-input-start"),end:this.container.querySelector(".ayan-setting-input-end")}}getItem(t){return this.elements[t]}}class b{constructor(){this.data={},this.storage=s.storage()}get(t){let e;return e=this.data.item?this.data.item:this.storage.get(t)}set(t,e){this.data.item="string"!=typeof e?JSON.stringify(e):e,this.storage.set(t,this.data.item)}}var w={Select:class{constructor(t){this.template=t.template,this.options=t,this.init()}init(){console.log(this.options),this.SelectDateInput=new v(this.template),this.bindEvent()}bindEvent(){let t=this.template.getItem("select"),e=this.template.getItem("setting");t.plan.addEventListener("click",t=>{e.setting.style.top="0"}),e.cancel.addEventListener("click",t=>{e.setting.style.top="-100%"}),e.start.addEventListener("click",t=>{this.SelectDateInput.show(e.start)}),e.end.addEventListener("click",t=>{this.SelectDateInput.show(e.end)})}}};const k="0.2.0";class T{constructor(){this.timer=null,this.isTimerPlaying=!1,this.time="00:00",this.events={},this.timerEvents=["start","cancel","stop","now","timing","clear"]}get currentTime(){return this.time}set currentTime(t){this.time=t}_setInterval(t=(()=>{}),e){return setInterval(()=>{this._trigger("timing"),t(this.currentTime)},e)}_clearInterval(t=null){null!==t&&(clearInterval(t),this.timer=null,this._trigger("clear"))}_type(t){return-1!==this.timerEvents.indexOf(t)?"timer":(console.error(`Unknown event name: ${t}`),null)}_trigger(t,e={}){this.events[t]&&this.events[t].length&&this.events[t].map(t=>{t(e)})}on(t,e){this._type(t)&&"function"==typeof e&&(this.events[t]||(this.events[t]=[]),this.events[t].push(e))}createAsyncTimerResource(t){return this.timerAsyncRes||(this.timerAsyncRes={}),this.timerAsyncRes[t]=new T,this.timerAsyncRes[t]}getAsyncTimerResource(t){return this.timerAsyncRes[t]}startTime(t,e=(()=>{})){if(this._trigger("start"),this.isTimerPlaying?this._clearInterval(this.timer):this.isTimerPlaying=!0,"number"!=typeof(t=Math.abs(parseFloat(t))))return new TypeError("请传入正确的时间类型,time is not a number");let n=60*t;this.timer=this._setInterval(()=>{if(n<=0)return this.currentTime="00:00",this._clearInterval(this.timer),this.isTimerPlaying=!1,void e(this.currentTime);let t=s.secondToTime(n);this.currentTime=t,e(this.currentTime),n--},1e3)}queryPresentTime(t){this._clearInterval(this.timer),this.timer=this._setInterval(()=>{this.currentTime=s.format("HH:mm:ss"),t(this.currentTime)},1e3),this._trigger("now")}updateTime(t,e=(()=>{})){this._clearInterval(this.timer),this.startTime(t,e)}cancelTime(t){this._clearInterval(this.timer),this.currentTime="00:00",t(this.currentTime),this._trigger("cancel")}}console.log(`\n %c ayanTimer v${k} %c https://github.com/ayan0312/ayanTimer \n`,"color: #803b39; background: #dc995a; padding:5px 0;","background: #efefef; padding:5px 0;");new class{constructor(t){this.version=k,this.timer=new T,this.storage=new b,this.options=this._handleOption(t),null===this.options.time&&(this.options.time=this.timer.currentTime),this._init()}about(){return`version:${this.version}`}static about(){return`version:${k}`}on(t,e){this.timer.on(t,e)}_handleOption(t){return{container:t.container||document.getElementById("ayan-timer"),time:t.time?s.secondToTime(t.time):null,work:this.storage.get("work")||25,rest:this.storage.get("rest")||5}}_init(){this.template=new f(this.options),this.select=new w.Select(this);let t=this.template.getItem("buttons"),e=this.template.getItem("time"),n=t=>{e.innerHTML=t};t.work.addEventListener("click",t=>{let e=this.template.getItem("options").work.value;this.storage.set("work",e),this.timer.updateTime(e,n)},!1),t.rest.addEventListener("click",t=>{let e=this.template.getItem("options").rest.value;this.storage.set("rest",e),this.timer.updateTime(e,n)},!1),t.reset.addEventListener("click",t=>{this.timer.cancelTime(n)},!1),t.now.addEventListener("click",t=>{this.timer.queryPresentTime(n)},!1),this._bindEvents()}_bindEvents(){}}({container:document.querySelector("#app")})}});
//# sourceMappingURL=renderer.js.map